/* jQuery.loader Plugin * @author Stéphan Zych <info@monkeymonk.be> * @copyriht 2010-2011 Stéphan Zych <info@monkeymonk.be> * @license New BSD License <http://creativecommons.org/licenses/BSD/> */
(function(e){"use strict";var t=function(e,t){for(var n in t)e=e.replace(new RegExp("{"+n+"}","g"),t[n]);return e},n=function(n,r){var i={className:"loader",tpl:'<div class="{className} hide"><div class="{className}-load"></div><div class="{className}-overlay"></div></div>',delay:200,loader:!0,overlay:!0,onHide:function(){},onShow:function(){}},s=function(n){return this.each(function(){i=e.extend({},i,n);var r=e(this),s;r.append(t(i.tpl,i));s=e("> ."+i.className,r);i.overlay&&s.addClass("overlay");i.loader&&e("."+i.className+"-load",r).on("click",function(){r.loader("hide",i.onHide)})})},o=function(t){i=e.extend({},i,t);var n=this,r=e(n),o=e("> ."+i.className+":first",r);if(!o.length){s.call(n,t);o=e("> ."+i.className+":first",r)}o.fadeIn(i.delay,function(){o.removeClass("hide");i.onShow(i)})},u=function(t){i=e.extend({},i,{onHide:t});var n=this,r=e(n),s=e("> ."+i.className+":first",r);s.length&&s.fadeOut(i.delay,function(){s.addClass("hide");i.onHide(i)})};return{init:s,show:o,hide:u}};e.fn.loader=function(t){e.data(this,"loader")||e.data(this,"loader",new n(this,t));var r=e.data(this,"loader");if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return r.init.apply(this,arguments);e.error('Method "'+arguments[0]+'" does not exist in $.loader plugin!')}})(jQuery);